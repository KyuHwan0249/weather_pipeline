FROM bitnamilegacy/spark:3.5.6

USER root

# sparkuser ìƒì„±
RUN groupadd -g 1001 spark && \
    useradd -m -u 1001 -g 1001 sparkuser

# init.sh ì¶”ê°€
COPY init.sh /usr/local/bin/init.sh
RUN chmod +x /usr/local/bin/init.sh

# ğŸ”¥ ì§„ì§œ entrypointë¡œ êµì²´ (bitnami entrypoint ì™„ì „ ë¬´ì‹œ)
ENTRYPOINT ["/usr/local/bin/init.sh"]

# CMDì—ëŠ” bitnami run.shë§Œ ì „ë‹¬
CMD ["/opt/bitnami/scripts/spark/run.sh"]
